###############################################################################
## Section "license" contains properties to configure the license management
###############################################################################

[license]

# Property "license-file" specifies the path to a demo license file or the name 
# of the license server used by the rlm daemon, in the format port@host 
# (for example 5053@licserver).
# The port number must be the same as that specified in the HOST line of the
# license file.
# If empty or not specified, a default path to a demo license file will be
# used (e.g: /usr/share/dcv/license/license.lic). If the default file does not 
# exists a demo license will be used.
#license-file = ""

###############################################################################
## Section "log" contains properties to configure the DCV logging system
###############################################################################

[log]

# Property "level" contains the logging level used by DCV.
# Can be set to ERROR, WARNING, INFO or DEBUG (in ascending level of verbosity).
# If not specified, the default level is INFO
#level = "INFO"

###############################################################################
## Section "session-management" contains the properties of DCV session creation
###############################################################################

[session-management]

# Property "create-session" requests to automatically create a console session 
# (with ID "console") at DCV startup.
# Can be set to true or false.
# If not specified, no console session will be automatically created.
create-session = false

# Property "enable-gl-in-virtual-sessions" specifies whether to employ the 
# 'dcv-gl' feature (a specific license will be required).
# Allowed values: 'always-on', 'always-off', 'default-on', 'default-off'.
# If not specified, the default value is 'default-on'.
#enable-gl-in-virtual-sessions = "default-on"

###############################################################################
## Section "session-management/defaults" contains the default properties of DCV sessions
###############################################################################

[session-management/defaults]

# Property "permissions-file" specifies the path to the permissions file
# automatically merged with the permissions selected by the user for each session.
# If empty or absent, use the default file in /etc/dcv/default.perm.
permissions-file = "/etc/dcv/public.perm"

###############################################################################
## Section "session-management.automatic-console-session" contains the properties 
## to be applied ONLY to the "console" session automatically created at server startup 
## when the create-session setting of section 'session-management' is set to true.
###############################################################################

[session-management/automatic-console-session]

# Property "owner" specifies the username of the owner of the automatically
# created "console" session.
owner = "caduser"

# Property "permissions-file" specifies the file that contains the permissions 
# to be used to check user access to DCV features.
# If empty, only the owner will have full access to the session.
permissions-file = "/etc/dcv/public.perm"

# Property "max-concurrent-clients" specifies the maximum number of concurrent
# clients per session.
# If set to -1, no limit is enforced. Default value -1;
max-concurrent-clients = -1

# Property "storage-root" specifies the path to the folder that will be used 
# as root-folder for file storage operations.
# The file storage will be disabled if the storage-root is empty or the folder 
# does not exist.
#storage-root = ""

###############################################################################
## Section "display" contains the properties of the dcv remote display
###############################################################################

[display]

# Property "target-fps" specifies the maximum allowed frames per second.
# A value of 0 means no limit. If not specified, or if set to a negative value,
# the target-fps value will be determined according to the server characteristics
# and the session type
#target-fps = 30

# CRITICAL: These parameters control display resolution and client resize behavior
# enable-client-resize: Allows clients to request display layout changes dynamically
# This enables dynamic resolution changes via URL parameters or client requests
enable-client-resize = true

# target-fps: Maximum frames per second for display
target-fps = 30

# max-head-resolution: Increased to support larger displays and dynamic sizing
# Set to 4K to accommodate various iframe sizes
max-head-resolution = 3840x2160

# web-client-max-head-resolution: Increased for iframe flexibility
# The web viewer will auto-detect iframe size and request appropriate resolution
# Allows clients to request resolutions up to 4K
web-client-max-head-resolution = 3840x2160

###############################################################################
## Section "connectivity" contains the properties of the dcv connection
###############################################################################

[connectivity]

# Property "web-port" specifies on which TCP port the DCV server listens on.
# It must be a number between 1024 and 65535 representing an
# available TCP port on which the web server embedded in the DCV Server will
# listen for connection requests to serve HTTP(S) pages and WebSocket
# connections.
# If not specified, DCV will use port 8443.
#web-port=8444

# Property "web-url-path" specifies a URL path for the embedded web server.
# The path must start with /. For instance setting it to "/test/foo" means the
# web server will be reachable at https://host:port/test/foo.
# This property is especially useful when setting up a gateway that then
# routes each connection to a different DCV server.
# If not specified DCV uses "/", which means it will be reachable at
# https://host:port
#web-url-path="/dcv"

# Property "enable-quic-frontend" specifies whether the DCV server
# also enables the use of the QUIC transport for clients which support it.
# If not specified, DCV will enable QUIC.
#enable-quic-frontend=false

# Property "quic-port" specifies on which UDP port the DCV server listens.
# It must be a number between 1024 and 65535 representing an
# available UDP port on which the QUIC server embedded in the DCV Server will
# listen for requests connections by clients using the QUIC transport.
# If not specified, DCV will use port 8443.
#quic-port=8444

# Property "idle-timeout" specifies a timeout in minutes after which
# a client that does not send keyboard or mouse events is considered idle
# and hence disconnected.
# By default it is set to 60 (1 hour). Set to 0 to never disconnect
# idle clients.
#idle-timeout=120

# Property "web-x-frame-options" controls X-Frame-Options header for iframe embedding.
# CRITICAL: Set to empty string or ALLOWALL to allow iframe embedding. DCV defaults to DENY which blocks iframes.
# When X-Frame-Options is set to DENY (default), it blocks iframe embedding even if CSP allows it.
# Allow embedding from localhost:3000 (development) or allow all (less secure but more flexible)
web-x-frame-options = "ALLOWALL"

# Property "web-extra-http-headers" allows adding custom HTTP headers.
# Use this to set Content-Security-Policy frame-ancestors for iframe embedding.
# Format: List of tuples like [("Header-Name", "Header-Value")]
# CSP frame-ancestors allows iframe embedding from these origins
# Note: file:// protocol cannot be allowed in CSP for security reasons
web-extra-http-headers = [("Content-Security-Policy", "frame-ancestors * http://localhost:* http://127.0.0.1:* https://localhost:* https://127.0.0.1:* http://localhost:3000 https://localhost:3000")]

###############################################################################
## Section "security" contains the properties related to authentication and security
###############################################################################

[security]

# Property "authentication" specifies the client authentication method used by
# the DCV server. Use 'system' to delegate client authentication to the
# underlying operating system. Use 'none' to disable client authentication and
# grant access to all clients.
authentication="none"

# Property "pam-service-name" specifies the name of the PAM configuration file
# used by DCV. The default PAM service name is 'dcv' and corresponds with
# the /etc/pam.d/dcv configuration file. This parameter is only used if
# the 'system' authentication method is used.
#pam-service-name="dcv-custom"

# Property "auth-token-verifier" specifies an endpoint (URL) for an external
# the authentication token verifier. If empty or not specified, the internal
# authentication token verifier is used
#auth-token-verifier="https://127.0.0.1:8444"

# Virtual display resolution settings
# CRITICAL: Virtual session resolution = where apps run (width/height)
# Display layout = what client sees (virtual-session-default-layout)
# Both should match for proper sizing. When enable-client-resize=true,
# clients can request different sizes and DCV will resize the virtual session.
# Start with a reasonable default that matches common viewport sizes.
[session-management/defaults/virtual-session]
# Default resolution - will be adjusted dynamically by client if enable-client-resize=true
# Using 1920x1080 as default - matches common viewport sizes and prevents mismatches
width = 1920
height = 1080

# Property "virtual-session-default-layout" - Set initial layout to match virtual resolution
# This ensures display layout matches virtual resolution at session start
# When enable-client-resize=true, this will be updated dynamically by clients
virtual-session-default-layout = 1920x1080+0+0
